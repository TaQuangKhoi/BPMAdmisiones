{
  "modelVersion" : "2.2",
  "previousArtifactVersion" : "1.11.52",
  "id" : "ModuloUsuarios",
  "name" : "ModuloUsuarios",
  "lastUpdate" : 1645725836114,
  "rows" : [
    [
      {
        "type" : "container",
        "dimension" : {
          "xs" : 12,
          "sm" : 12,
          "md" : 12,
          "lg" : 12
        },
        "propertyValues" : {
          "cssClasses" : {
            "type" : "constant",
            "value" : "m-content"
          },
          "hidden" : {
            "type" : "constant",
            "value" : false
          },
          "repeatedCollection" : {
            "type" : "variable",
            "value" : ""
          }
        },
        "reference" : "7923270b-7042-45a5-ad49-a2d11b3c242a",
        "hasValidationError" : false,
        "id" : "pbContainer",
        "rows" : [
          [
            {
              "type" : "container",
              "dimension" : {
                "xs" : 12,
                "sm" : 12,
                "md" : 12,
                "lg" : 12
              },
              "propertyValues" : {
                "cssClasses" : {
                  "type" : "constant",
                  "value" : ""
                },
                "hidden" : {
                  "type" : "constant",
                  "value" : false
                },
                "repeatedCollection" : {
                  "type" : "variable",
                  "value" : ""
                }
              },
              "reference" : "0eb3e930-2f3d-4e03-9bfc-9f0e2595ed8b",
              "hasValidationError" : false,
              "id" : "pbContainer",
              "rows" : [
                [
                  {
                    "type" : "container",
                    "dimension" : {
                      "xs" : 12,
                      "sm" : 12,
                      "md" : 12,
                      "lg" : 12
                    },
                    "propertyValues" : {
                      "cssClasses" : {
                        "type" : "constant",
                        "value" : "row"
                      },
                      "hidden" : {
                        "type" : "constant",
                        "value" : false
                      },
                      "repeatedCollection" : {
                        "type" : "variable",
                        "value" : ""
                      }
                    },
                    "reference" : "1c3ada38-453f-46aa-bd00-db01359a6485",
                    "hasValidationError" : false,
                    "id" : "pbContainer",
                    "rows" : [
                      [
                        {
                          "type" : "container",
                          "dimension" : {
                            "xs" : 12,
                            "sm" : 12,
                            "md" : 12,
                            "lg" : 12
                          },
                          "propertyValues" : {
                            "cssClasses" : {
                              "type" : "constant",
                              "value" : "m-portlet m-portlet--tab"
                            },
                            "hidden" : {
                              "type" : "constant",
                              "value" : false
                            },
                            "repeatedCollection" : {
                              "type" : "variable",
                              "value" : ""
                            }
                          },
                          "reference" : "cf32e5ba-feb7-4efa-a88f-de295b61d478",
                          "hasValidationError" : false,
                          "id" : "pbContainer",
                          "rows" : [
                            [
                              {
                                "type" : "container",
                                "dimension" : {
                                  "xs" : 12,
                                  "sm" : 12,
                                  "md" : 12,
                                  "lg" : 12
                                },
                                "propertyValues" : {
                                  "cssClasses" : {
                                    "type" : "constant",
                                    "value" : "m-portlet__head"
                                  },
                                  "hidden" : {
                                    "type" : "constant",
                                    "value" : false
                                  },
                                  "repeatedCollection" : {
                                    "type" : "variable",
                                    "value" : ""
                                  }
                                },
                                "reference" : "6476218c-cfc2-428e-90f7-6865e3771659",
                                "hasValidationError" : false,
                                "id" : "pbContainer",
                                "rows" : [
                                  [
                                    {
                                      "type" : "component",
                                      "dimension" : {
                                        "xs" : 12,
                                        "sm" : 12,
                                        "md" : 12,
                                        "lg" : 12
                                      },
                                      "propertyValues" : {
                                        "cssClasses" : {
                                          "type" : "constant",
                                          "value" : ""
                                        },
                                        "hidden" : {
                                          "type" : "constant",
                                          "value" : false
                                        },
                                        "text" : {
                                          "type" : "interpolation",
                                          "value" : "Gestión de administrativos"
                                        },
                                        "level" : {
                                          "type" : "constant",
                                          "value" : "Level 2"
                                        },
                                        "alignment" : {
                                          "type" : "constant",
                                          "value" : "center"
                                        }
                                      },
                                      "reference" : "0b8552ba-1b0e-4b0c-ac60-cfdab29f1f85",
                                      "hasValidationError" : false,
                                      "id" : "pbTitle"
                                    }
                                  ]
                                ]
                              }
                            ],
                            [
                              {
                                "type" : "container",
                                "dimension" : {
                                  "xs" : 12,
                                  "sm" : 12,
                                  "md" : 12,
                                  "lg" : 12
                                },
                                "propertyValues" : {
                                  "cssClasses" : {
                                    "type" : "constant",
                                    "value" : "m-portlet__body"
                                  },
                                  "hidden" : {
                                    "type" : "constant",
                                    "value" : false
                                  },
                                  "repeatedCollection" : {
                                    "type" : "variable",
                                    "value" : ""
                                  }
                                },
                                "reference" : "118ff093-62f2-478f-a86c-7cc4c54e1289",
                                "hasValidationError" : false,
                                "id" : "pbContainer",
                                "rows" : [
                                  [
                                    {
                                      "type" : "component",
                                      "dimension" : {
                                        "xs" : 12,
                                        "sm" : 12,
                                        "md" : 12,
                                        "lg" : 12
                                      },
                                      "propertyValues" : {
                                        "cssClasses" : {
                                          "type" : "constant",
                                          "value" : ""
                                        },
                                        "hidden" : {
                                          "type" : "expression",
                                          "value" : "lstCampusUsuario.length <= 1"
                                        },
                                        "disabled" : {
                                          "type" : "constant",
                                          "value" : false
                                        },
                                        "required" : {
                                          "type" : "constant",
                                          "value" : false
                                        },
                                        "labelHidden" : {
                                          "type" : "constant",
                                          "value" : false
                                        },
                                        "label" : {
                                          "type" : "interpolation",
                                          "value" : "Campus"
                                        },
                                        "labelPosition" : {
                                          "type" : "constant",
                                          "value" : "top"
                                        },
                                        "labelWidth" : {
                                          "type" : "constant",
                                          "value" : 4
                                        },
                                        "placeholder" : {
                                          "type" : "interpolation",
                                          "value" : "Seleccionar..."
                                        },
                                        "availableValues" : {
                                          "type" : "expression",
                                          "value" : "lstCampus"
                                        },
                                        "displayedKey" : {
                                          "type" : "constant",
                                          "value" : "descripcion"
                                        },
                                        "returnedKey" : {
                                          "type" : "constant"
                                        },
                                        "value" : {
                                          "type" : "variable",
                                          "value" : "campus_selected"
                                        }
                                      },
                                      "reference" : "fcc9a43b-062a-42c3-b0dd-7ab503bfe5e8",
                                      "hasValidationError" : false,
                                      "id" : "pbSelect"
                                    }
                                  ],
                                  [
                                    {
                                      "type" : "component",
                                      "dimension" : {
                                        "xs" : 12,
                                        "sm" : 12,
                                        "md" : 12,
                                        "lg" : 12
                                      },
                                      "propertyValues" : {
                                        "cssClasses" : {
                                          "type" : "constant",
                                          "value" : ""
                                        },
                                        "hidden" : {
                                          "type" : "expression",
                                          "value" : "campus_selected.descripcion == undefined"
                                        },
                                        "allowHTML" : {
                                          "type" : "constant",
                                          "value" : true
                                        },
                                        "headers" : {
                                          "type" : "constant",
                                          "value" : [
                                            "NOMBRE(S)",
                                            "APELLIDOS",
                                            "USUARIO",
                                            "FECHA CREACIÓN",
                                            "ÚLTIMA CONEXIÓN"
                                          ]
                                        },
                                        "content" : {
                                          "type" : "expression",
                                          "value" : "lstUsuarios"
                                        },
                                        "columnsKey" : {
                                          "type" : "constant",
                                          "value" : [
                                            "firstname",
                                            "lastname",
                                            "creation_date",
                                            "userName",
                                            "last_connection"
                                          ]
                                        },
                                        "selectedRow" : {
                                          "type" : "variable",
                                          "value" : ""
                                        },
                                        "striped" : {
                                          "type" : "constant",
                                          "value" : true
                                        },
                                        "condensed" : {
                                          "type" : "constant",
                                          "value" : false
                                        },
                                        "bordered" : {
                                          "type" : "constant",
                                          "value" : false
                                        },
                                        "campusSelected" : {
                                          "type" : "variable",
                                          "value" : "campus_selected"
                                        },
                                        "userid" : {
                                          "type" : "variable",
                                          "value" : "userData.user_id"
                                        }
                                      },
                                      "reference" : "ff214b71-3a81-4ee4-9cbd-430581050ffa",
                                      "hasValidationError" : false,
                                      "id" : "customTableUsuarios"
                                    }
                                  ]
                                ]
                              }
                            ]
                          ]
                        }
                      ]
                    ]
                  }
                ]
              ]
            }
          ]
        ]
      }
    ]
  ],
  "assets" : [
    {
      "id" : "8d68c799-a863-447b-934e-a738050dee63",
      "name" : "encabezados.css",
      "type" : "css",
      "order" : 4,
      "external" : false
    },
    {
      "id" : "e0ee50e5-3065-4e6a-886f-9816a1b1a93c",
      "name" : "style-modulo_usuarios.css",
      "type" : "css",
      "order" : 2,
      "external" : false
    },
    {
      "id" : "0080daaa-e2b1-464e-8226-c144ce3a1c8e",
      "name" : "style.css",
      "type" : "css",
      "order" : 1,
      "external" : false
    },
    {
      "id" : "5006ea79-b1ee-4003-b412-32a0c7f933a5",
      "name" : "anahuac_custom_styles (2).css",
      "type" : "css",
      "order" : 3,
      "external" : false
    }
  ],
  "inactiveAssets" : [ ],
  "variables" : {
    "lstMembership" : {
      "type" : "url",
      "value" : [
        "../API/identity/membership?f=user_id={{userData.user_id}}&d=role_id&d=group_id&c=100"
      ],
      "exposed" : false
    },
    "lstCampus" : {
      "type" : "expression",
      "value" : [
        "var resultado = [];\r",
        "\r",
        "let campus = \"\";\r",
        "for(var x in $data.lstCampusUsuario){\r",
        "    for(var index in $data.lstCatCampus){\r",
        "        if($data.lstCampusUsuario[x].descripcion === $data.lstCatCampus[index].descripcion){\r",
        "            campus+=`${campus.length > 0?',':''}${$data.lstCampusUsuario[x].group_id}`\r",
        "        }\r",
        "    }\r",
        "}\r",
        "\r",
        "resultado.push({\"descripcion\":\"Todos los campus\",\"group_id\":`(${campus})`})\r",
        "for(var x in $data.lstCampusUsuario){\r",
        "    for(var index in $data.lstCatCampus){\r",
        "        if($data.lstCampusUsuario[x].descripcion === $data.lstCatCampus[index].descripcion){\r",
        "            $data.lstCatCampus[index].valor = $data.lstCampusUsuario[x].valor;\r",
        "            resultado.push({...$data.lstCatCampus[index], \"group_id\":$data.lstCampusUsuario[x].group_id});\r",
        "        }\r",
        "    }\r",
        "}\r",
        "if($data.lstCampusUsuario.length == 1){\r",
        "    $data.campus_selected = resultado[1];\r",
        "}\r",
        "return resultado;"
      ],
      "exposed" : false
    },
    "lstCampusByUser" : {
      "type" : "expression",
      "value" : [
        "var resultado=[];\r",
        "\r",
        "for(var x in $data.lstMembership){\r",
        "    if($data.lstMembership[x].group_id.name.indexOf(\"CAMPUS\") != -1){\r",
        "        resultado.push({\"name\":$data.lstMembership[x].group_id.name,\"id\":$data.lstMembership[x].group_id.id});\r",
        "    }\r",
        "}\r",
        "\r",
        "return resultado;"
      ],
      "exposed" : false
    },
    "lstCampusRole" : {
      "type" : "expression",
      "value" : [
        "var lstData = []\r",
        "var objData = {}\r",
        "for(var index in $data.lstCatCampus){\r",
        "\tobjData = {\r",
        "\t\t\"descripcion\":\"\",\r",
        "\t\t\"valor\":\"\"\r",
        "\t}\r",
        "\tobjData[\"descripcion\"] = $data.lstCatCampus[index].descripcion;\r",
        "\tobjData[\"valor\"] = $data.lstCatCampus[index].grupoBonita;\r",
        "\tlstData.push(objData);\r",
        "}\r",
        "return lstData;"
      ],
      "exposed" : false
    },
    "lstCampusUsuario" : {
      "type" : "expression",
      "value" : [
        "var resultado = [];\r",
        "for(var x in $data.lstCampusByUser){\r",
        "    for(var index in $data.lstCampusRole){\r",
        "        if($data.lstCampusByUser[x].name === $data.lstCampusRole[index].valor){\r",
        "            //resultado.push({...$data.lstCampusRole[index],\"group_id\":$data.lstCampusByUser[x].id});\r",
        "            let r2 = [];\r",
        "            r2.push({...$data.lstCampusRole[index],\"group_id\":$data.lstCampusByUser[x].id});\r",
        "            let i = 0;\r",
        "            resultado.forEach(value =>{\r",
        "                if(value.valor == r2[0].valor ){\r",
        "                   i++;\r",
        "                }\r",
        "            });\r",
        "            if(i === 0){\r",
        "              resultado.push({...$data.lstCampusRole[index],\"group_id\":$data.lstCampusByUser[x].id});\r",
        "            }\r",
        "        }\r",
        "    }\r",
        "}\r",
        "\r",
        "return resultado;"
      ],
      "exposed" : false
    },
    "campus_selected" : {
      "type" : "json",
      "value" : [
        "{",
        "\"clave\": \"\",",
        "\"descripcion\": \"\",",
        "\"fechaCreacion\": \"\",",
        "\"fechaImplementacion\": \"\",",
        "\"id\": \"\",",
        "\"isEliminado\": null,",
        "\"isEnabled\": null,",
        "\"nombreDocumento\": \"\",",
        "\"persistenceId\": 0,",
        "\"persistenceId_string\": \"\",",
        "\"persistenceVersion\": 0,",
        "\"persistenceVersion_string\": \"\",",
        "\"urlAutorDatos\": \"\",",
        "\"urlAvisoPrivacidad\": \"\",",
        "\"urlDatosVeridicos\": \"\",",
        "\"usuarioBanner\": \"\"",
        "}"
      ],
      "exposed" : false
    },
    "lstCatCampus" : {
      "type" : "businessdata",
      "value" : [
        "{\"displayValue\":\"getCatCampus [com.anahuac.catalogos.CatCampus]\",\"businessObjectName\":\"undefined\",\"query\":{\"name\":\"getCatCampus\",\"displayName\":\"getCatCampus\"},\"id\":\"com.anahuac.catalogos.CatCampus\",\"filters\":[],\"pagination\":{\"p\":\"0\",\"c\":\"999\"}}"
      ],
      "exposed" : false
    },
    "userData" : {
      "type" : "url",
      "value" : [
        "../API/system/session/unusedId"
      ],
      "exposed" : false
    },
    "lstUsuarios" : {
      "type" : "json",
      "value" : [
        "[]"
      ],
      "exposed" : false
    }
  },
  "hasValidationError" : false,
  "uuid" : "3cb2014e-9e7c-4f0f-8611-84428e7de2a5",
  "type" : "page",
  "description" : "Page generated with Bonita UI designer"
}